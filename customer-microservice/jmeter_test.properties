# =========================================================================
# JMeter Test Properties for Customer Microservice Connection Storm Tests
# =========================================================================
# This file contains all configuration parameters for JMeter tests targeting
# the Customer API microservice with the 10GB dataset.
# =========================================================================

# -------------------------------------------------------------------------
# Server Configuration
# -------------------------------------------------------------------------

# Target server settings - Update with your VM addresses
#host=localhost
#port=5000
#protocol=http

# For multi-VM testing, uncomment and update these for each VM
vm1_host=172.31.37.130
vm_port=5000
vm2_host=172.31.40.1
vm3_host=172.31.35.118
protocol=http


# Connection settings
connect_timeout=5000
response_timeout=30000

# -------------------------------------------------------------------------
# Test Execution Parameters
# -------------------------------------------------------------------------

# Thread configuration
threads=10
rampup=5
duration=60
loops=10

# Test mode
# Options: local, distributed
test_mode=local

# For distributed testing
remote_hosts=172.31.47.183,172.31.35.199
client.rmi.localport=7000
server.rmi.localport=7001
server.rmi.ssl.disable=true

# -------------------------------------------------------------------------
# Connection Storm Parameters
# -------------------------------------------------------------------------

# Storm intensity
storm_operations=20
storm_concurrency=5

# Payload size for large payload tests (in KB)
payload_size=512

# Heavy computation settings
computation_depth=3
computation_complexity=medium

# -------------------------------------------------------------------------
# Output Files Configuration
# -------------------------------------------------------------------------

# Results output files
results_file=customer_storm_results.csv
aggregate_file=customer_storm_aggregate.csv
response_time_file=customer_storm_response_times.csv
perfmon_file=customer_storm_perfmon.csv

# Output directory for all results
test_results_dir=test-results
test_data_dir=test-data

# Log settings
jmeter.save.saveservice.output_format=csv
jmeter.save.saveservice.data_type=true
jmeter.save.saveservice.label=true
jmeter.save.saveservice.response_code=true
jmeter.save.saveservice.response_message=true
jmeter.save.saveservice.successful=true
jmeter.save.saveservice.thread_counts=true
jmeter.save.saveservice.thread_name=true
jmeter.save.saveservice.time=true
jmeter.save.saveservice.latency=true
jmeter.save.saveservice.timestamp=true
jmeter.save.saveservice.connect_time=true

# -------------------------------------------------------------------------
# Advanced Settings
# -------------------------------------------------------------------------

# Batch size for customer creation tests
batch_customer_count=5
batch_customer_size_kb=50

# Connection pool settings
http.connection.stalecheck$Boolean=true
httpclient.timeout=30000
httpclient4.idletimeout=10000
hc.parameters.file=hc.parameters

# Performance tuning
jmeter.threads.daemon=true
httpsampler.max_bytes_to_store_per_request=102400
httpsampler.max_buffer_size=102400
httpclient4.retrycount=1

# -------------------------------------------------------------------------
# VM-specific Settings
# -------------------------------------------------------------------------

# Set a unique instance name for each JMeter instance
# instance_name=jmeter-client-1
# instance_name=jmeter-client-2
# instance_name=jmeter-client-3

# -------------------------------------------------------------------------
# MongoDB Connection Storm Specific Settings
# -------------------------------------------------------------------------

# Connection pool monitoring
monitor_connections=true
connection_check_interval=5000

# Storm patterns
# Options: gradual, spike, sustained, oscillating
storm_pattern=sustained

# Storm duration in seconds
storm_duration=300

# Ramp-up pattern for gradual storms (seconds)
gradual_ramp=30

# Spike interval for spike pattern (seconds)
spike_interval=60

# -------------------------------------------------------------------------
# Visualization Settings
# -------------------------------------------------------------------------

# Enable real-time results
jmeter.reportgenerator.overall_granularity=1000
jmeter.reportgenerator.report_title=Customer Microservice Connection Storm Test
jmeter.reportgenerator.apdex_satisfied_threshold=500
jmeter.reportgenerator.apdex_tolerated_threshold=1500
jmeter.reportgenerator.exporter.html.series_filter=^(Customer|Connection|Large Payload).*
